<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="description" content="Kiosk QR - Premium minimal kiosk katalog deneyimi" />
  <meta name="theme-color" content="#000000" />

  <!-- PWA Meta Tags -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Kiosk QR" />

  <!-- Icons -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <title>Kiosk QR - Katalog</title>

  <!-- Cache Nuke: Eski bozuk SW ve cache'leri temizle -->
  <script>
    (function() {
      var CACHE_VERSION = 2;
      var key = 'kiosk-cache-v';
      try {
        var current = parseInt(localStorage.getItem(key) || '0', 10);
        if (current < CACHE_VERSION) {
          // Tüm Service Worker'ları unregister et
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(regs) {
              regs.forEach(function(r) { r.unregister(); });
            });
          }
          // Tüm Cache Storage'ı temizle
          if ('caches' in window) {
            caches.keys().then(function(names) {
              names.forEach(function(name) { caches.delete(name); });
            });
          }
          localStorage.setItem(key, String(CACHE_VERSION));
          // Temizlik sonrası yeniden yükle
          if (current > 0) { location.reload(); }
        }
      } catch(e) {}
    })();
  </script>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>